---
    import dayjs from "dayjs"
    import { user } from "virtual:os/user-config"
    
    const resp = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${user.coords.lat}&lon=${user.coords.long}&appid=${import.meta.env.OPEN_WEATHER_API_KEY}&units=metric`)
    const data = await resp.json()

    const { main: weather } = data
---

<div class="flex justify-between px-10">
    <div class="flex gap-3">
        <div class="text-sm">{dayjs().format('dddd, DD MMM')}</div>
        <div class="text-sm">{weather?.temp}<span class="text-primary">Â°</span> {user.coords?.name}</div>
    </div>

    {
        user.background ? <>
            <div class="text-sm opacity-70">
                Photo by <a
                    href={user.background.creditProfileUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="border-b-2 border-gray-800 hover:border-primary pt-1 transition"
                >
                    {user.background.creditName}
                </a>
            </div>
        </> : null
    }
</div>